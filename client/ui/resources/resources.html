<template name="resourceList">
  <div class="container">

    {{#if verbose}}
      {{#each resources}}
        {{> resourceVerbose}}
      {{/each}}
    {{else}}
      {{#each resources}}
        {{> resourceMinimal}}
      {{/each}}
    {{/if}}

  </div>
</template>

<template name="resourceItem">
  <div class="container">

    {{#with resource}}
      {{> resourceVerbose}}
    {{/with}}

  </div>
</template>

<template name="resourceVerbose">
  <div class="row">
    <div class="col-xs-12">

      <div class="panel panel-default">
        <div class="panel-heading">

          <h3 class="resource-h3">
            {{name}}
            {{#if bookmarked}}
            <span class="glyphicon glyphicon-bookmark"></span>
            {{/if}}
          </h3>

          <span class="label label-default">
            <span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span>
            &nbsp; bookmarks &nbsp;
            <strong>{{bookmark_count}}</strong>
          </span>
          &nbsp;

          {{#if currentUser}}
            {{#if bookmarked}}
              <a href="#" class="js-toggle-bookmark">
                remove bookmark
              </a>
            {{else}}
              <a href="#" class="js-toggle-bookmark">
                add bookmark
              </a>
            {{/if}}
          {{else}}
              <a href="#" class="disabled">
                sign in to bookmark
              </a>
          {{/if}}

        </div> <!-- end panel heading -->
        <div class="panel-body">

          <div class="row">
            <div class="col-xs-12 col-sm-6">
              <p class="resource-info">
                <a href="{{url}}">{{url}}</a>
              </p>
              <p class="resource-info">
                {{description}}
              </p>
            </div>

            <div class="col-xs-12 col-sm-6">
              <p class="resource-info">
                <strong>Added by</strong>
                <a href="/user/{{createdBy.username}}">
                  <span class="glyphicon glyphicon-user" aria-hidden="true"></span> {{createdBy.username}}
                </a> <br/>
                {{relative_date createdOn}}
              </p>
            </div>
          </div>
        </div> <!-- end panel body -->
        <div class="panel-footer">

          {{#each tags}}
            {{>tagLabel}}
          {{/each}}

        </div><!-- end panel footer -->
      </div> <!-- end panel -->

    </div>
  </div>
</template>

<template name="resourceMinimal">
  <div class="row">
    <div class="col-xs-12">

      <div class="panel panel-default">
        <div class="panel-heading">

          <h3 class="resource-h3">
            <a href="/resource/{{_id}}">{{name}}</a>
            {{#if bookmarked}}
            <span class="glyphicon glyphicon-bookmark"></span>
            {{/if}}
          </h3>

          <span class="label label-default">
            <span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span>
            &nbsp; bookmarks &nbsp;
            <strong>{{bookmark_count}}</strong>
          </span>
          &nbsp;

          {{#if currentUser}}
            {{#if bookmarked}}
              <a href="#" class="js-toggle-bookmark">
                remove bookmark
              </a>
            {{else}}
              <a href="#" class="js-toggle-bookmark">
                add bookmark
              </a>
            {{/if}}
          {{else}}
              <a href="#" class="disabled">
                sign in to bookmark
              </a>
          {{/if}}

        </div> <!-- end panel heading -->
        <div class="panel-body">

          <p class="resource-info">
            {{description}}
          </p>

        </div> <!-- end panel body -->
        <div class="panel-footer">

          {{#each tags}}
            {{>tagLabel}}
          {{/each}}

        </div><!-- end panel footer -->
      </div> <!-- end panel -->

    </div>
  </div>
</template>
